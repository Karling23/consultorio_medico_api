- name: Deploy to VPS
  uses: appleboy/ssh-action@v1.0.3
  with:
    host: ${{ secrets.VPS_HOST }}
    username: ${{ secrets.VPS_USER }}
    key: ${{ secrets.VPS_KEY }}
    script: |
      cd /opt/consultorio_medico_api

      # Actualizar repositorio
      git pull origin master

      # Instalar dependencias en el VPS (donde S√ç tienes Node 22)
      npm install

      # Construir en el VPS
      npm run build

      # Reiniciar PM2
      pm2 restart consultorio-medico-api || pm2 start dist/main.js --name consultorio-medico-api
      pm2 save
